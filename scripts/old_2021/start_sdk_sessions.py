import os
import sys
sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/Doug/pbstools')
from pbstools import PythonJob 

python_file = r"/allen/programs/braintv/workgroups/nc-ophys/nick.ponvert/src/licking_behavior/scripts/fit_sdk_sessions.py"

jobdir = '/allen/programs/braintv/workgroups/nc-ophys/nick.ponvert/cluster_jobs/20190629_sdk_fit'

job_settings = {'queue': 'braintv',
                'mem': '15g',
                'walltime': '24:00:00',
                'ppn':1,
                'jobdir': jobdir,
                }

# with subjects_to_use = [847076515]
# experiment_ids = [891996193, 893831526, 891054695, 892805315, 889772922]

# with subjects_to_use = [827778598, 814111925, 813703535, 820878203, 803258370]
#  experiment_ids = [862023618, 862023618, 862848084, 862848084, 844395446, 842973730,
#         843519218, 842975542, 847241639, 843520488, 848007790, 847125577,
#         851060467, 850479305, 850489605, 845037476, 849199228, 846487947,
#         849203565, 848692970, 849204593, 848694045, 851932055, 848694639,
#         851056106, 854703904, 866463736, 866463736, 848697625, 853328133,
#         848698709, 853962969, 855582961, 852691524, 868911434, 868911434,
#         869972431, 869972431, 871159631, 871159631]


# with subjects_to_use = [800311507, 789992895, 772629800, 766025752, 766015379, 788982905,
# 843387577, 789014546, 830940312, 834902192, 820871399, 827778598]
#  experiment_ids = [820298614, 813083478, 813070010, 825615139, 888666715, 820307042,
#         820307518, 822656725, 815652334, 822641265, 817267785, 862848066,
#         822015264, 822647135, 878363070, 823372519, 806456687, 822028017,
#         817267860, 822647116, 821011078, 825120601, 825130141, 823396897,
#         823392290, 822024770, 840702910, 862023618, 862023618, 841948542,
#         826576503, 826585773, 862848084, 862848084, 827230913, 826583436,
#         827236946, 831330404, 825623170, 846490568, 849203586, 830697288,
#         848694025, 866463736, 866463736, 848697604, 855582981, 868911434,
#         868911434, 856096766, 869972431, 869972431, 829408506, 817251835,
#         871159631, 871159631, 877696762, 864370674, 865744231, 879332693,
#         807752719, 816795311, 880375092, 889777243, 810120743, 808619543,
#         811456530, 884218326, 882935355, 885061426, 884221469, 885067826,
#         885933191]

# with subjects_to_use = [830901414, 842724844, 765991998, 803592122, 791756316, 795522266,
#  791871796, 847074139, 800312319, 837628429, 813702144, 795512663,
#  772622642, 834823464, 784057617, 837581576, 807248984, 847076515,
#  814111925, 813703535, 830896318, 831004160, 820878203, 803258370,
#  823826963, 760949537, 803582244, 722884873, 744935640, 738695281,
#  756575004, 831008730, 741953980, 756577240, 744911447, 756674776,
#  722884863, 623289718, 652074239, 651725149, 713968352, 710324779,
#  713426152, 707282079, 710269817, 716520602, 719239251, 734705385,
#  705093661, 692785809]

experiment_ids = [825113099, 873968820, 875045489, 833631914, 823373117, 891994418,
       823387582, 828124670, 825104520, 806455766, 877697554, 824082925,
       828960059, 825612596, 833629926, 825612612, 892799212, 891996193,
       826573641, 878358326, 834279512, 826572958, 829409034, 827229849,
       827227470, 826587940, 844395446, 842973730, 877022592, 877018118,
       843519218, 830093338, 842975542, 847241639, 843520488, 848007790,
       836258957, 847125577, 851060467, 830090223, 850479305, 850489605,
       845037476, 829416867, 830081263, 863735602, 830692690, 859147033,
       849199228, 846487947, 849203565, 830700781, 836912930, 830700800,
       834279496, 836258936, 848692970, 849204593, 848694045, 854703305,
       851932055, 848694639, 851056106, 836911939, 854703904, 848697625,
       853328133, 853328115, 869969393, 848698709, 805784331, 837296345,
       853962969, 853962951, 855577488, 855582961, 852691524, 868905381,
       837729902, 856095742, 803736273, 775614751, 838849908, 798403387,
       838849930, 837297990, 797255551, 806989729, 799368904, 792813858,
       796306435, 792816531, 799366517, 805100431, 805784313, 796306417,
       799368262, 794378505, 792812544, 794381992, 743160774, 744540350,
       742828015, 754065714, 750536682, 746425946, 747321353, 750850855,
       754068181, 746445059, 755649776, 755647764, 753089326, 746426152,
       754091013, 756119038, 756812463, 758319777, 746257362, 754056568,
       744540163, 746445153, 750536778, 755001578, 755650903, 756119052,
       757628365, 796106321, 796105304, 759283789, 778644591, 744540132,
       747321339, 746425960, 754064001, 755647750, 750852080, 756119239,
       756812477, 755649889, 759580717, 758312489, 759037388, 757945399,
       788490510, 787498309, 783928214, 787501821, 788488596, 783927872,
       784482326, 788489531, 759283774, 760097857, 759276375, 760598315,
       760604919, 760767562, 759580731, 759283945, 760603437, 759841294,
       760603451, 760767168, 760095646, 807753318, 796106850, 761059374,
       761607566, 760097947, 760767396, 760604597, 761058739, 760098070,
       764131600, 770667128, 762169641, 807753334, 796105823, 764532079,
       762161795, 760098363, 760604901, 761059388, 760098185, 807753920,
       873972085, 795075034, 795076128, 872432459, 795948257, 795952488,
       795952471, 790146945, 893831526, 790709081, 790149413, 789359614,
       791119849, 791453299, 791453282, 891054695, 893830418, 889771676,
       891052180, 892805315, 889772922, 891067673, 889775742, 889775726,
       886544609, 894726001, 894724592, 894727297, 894724572, 895421128,
       895422170, 810119680, 809497730, 808621015, 808621034, 809501118,
       808621958, 811458048, 880961028, 880374622, 882520593, 878363088,
       879331157, 881881193, 885067016, 885067844]

for experiment_id in experiment_ids:
    PythonJob(
        python_file,
        python_executable='/home/nick.ponvert/.conda/envs/visb/bin/python',
        python_args=experiment_id,
        conda_env=None,
        jobname = 'licking_model_{}'.format(experiment_id),
        **job_settings
    ).run(dryrun=False)
