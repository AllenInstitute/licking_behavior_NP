import sys
#sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/Doug/pbstools')
#from pbstools import PythonJob
sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/nick.ponvert/src/pbstools')
from pbstools import PythonJob 

python_file = r"/allen/programs/braintv/workgroups/nc-ophys/alex.piet/behavior/licking_behavior/scripts/20190711_psytrack_fit.py"
jobdir = '/allen/programs/braintv/workgroups/nc-ophys/alex.piet/behavior/psy_fits/20190711_psytrack'
job_settings = {'queue': 'braintv',
                'mem': '15g',
                'walltime': '48:00:00',
                'ppn':1,
                'jobdir': jobdir,
                }

experiment_ids = [842513687, 841951447, 841601446, 840705705, 840157581, 839653299, 839387525, 837730373, 837298553, 836909490, 836260129, 835008543, 834275038, 833631932, 898747791, 894727297, 893825996, 892799212, 891994418, 891052180, 889771676, 894726001, 893831526, 892805315, 891996193, 891054695, 889772922, 864370674, 862848066, 859148154, 858421897, 857660011, 856938751, 856096766, 855582981, 853325726, 852691507, 851933686, 851060485, 850462509, 849203586, 848697604, 869969410, 863735602, 860030092, 859147033, 858420173, 857658471, 855577488, 854703305, 853962951, 853328115, 852689561, 851932072, 895422170, 894724572, 893830418, 892793301, 891065492, 889775726, 888682725, 887362436, 886544609, 885933209, 885067016, 884221487, 882519987, 880961028, 880374622, 879331157, 878363088, 877697554, 877022592, 875732176, 875045646, 873972085, 873156540, 872433717, 871155338, 869964292, 880961028, 880374622, 879331157, 878363088, 877697554, 877022592, 875732176, 875045646, 873972085, 873156540, 872433717, 871155338, 869964292, 826585773, 825623170, 825120601, 823392290, 822641265, 822024770, 815096009, 813083494, 810119703, 809500564, 809196647, 808619526, 807752701, 806990245, 806456625, 884218326, 882935355, 881881171, 880375092, 879332693, 878363070, 877696762, 877022583, 875732195, 819432482, 818904275, 817263470, 816847460, 813083478, 811988977, 811456530, 810738327, 809500093, 809195587, 808619543, 807752719, 806989088, 806456687, 837729902, 837296345, 836258936, 835740405, 835006071, 834279496, 833629926, 831324619, 830700781, 830093355, 875729873, 873968801, 868899428, 868231423, 878358326, 877691075, 877018118, 875729856, 875045489, 873968820, 873154932, 871154421, 869969393, 868905381, 868231440, 867343333, 866929742, 791974731, 792813858, 793738343, 794381992, 795076128, 795952471, 796105304, 797255551, 811458048, 809501118, 809195570, 808621034, 807753334, 806989729, 806455766, 783927872, 784482326, 787501804, 787498290, 789359614, 791983479, 794389520, 795075053, 795948257, 798398183, 799368904, 788489531, 782675457, 782675436, 809497730, 808621958, 807753318, 805784331, 805100414, 796107403, 796307952, 797254124, 798392580, 799366535, 800035827, 800398152, 803736273, 838849930, 836910438, 836260147, 835738362, 835008526, 834275020, 833629942, 832802571, 832117336, 831330384, 791980891, 792815735, 793738380, 795073741, 795953296, 796108483, 796308505, 798404219, 776413956, 778064481, 791450265, 793733895, 796106850, 788490510, 775614751, 778644591, 779327555, 780955942, 787461073, 784476477, 787521328, 786488799, 792812544, 836911939, 836258957, 835740423, 833631914, 832115263, 830702018, 830700800, 830093338, 828965691, 827238524, 826587940, 825130141, 823396880, 822647135, 822032328, 820307518, 819434449, 819434439, 818908650, 817267785, 816846652, 815652334, 815097967, 893831541, 892793263, 892001352, 891067673, 889775742, 888666698, 887357514, 885067844, 882932458, 882520593, 880960336, 853962969, 852689577, 851932055, 851056106, 850489605, 849199228, 848692970, 896160394, 895422187, 893830436, 892801488, 892001369, 891067646, 889777243, 888666715, 887362952, 885933191, 885067826, 884221469, 853965818, 848698709, 848694639, 847125577, 846484396, 845020615, 843519218, 842973730, 848694045, 847241639, 846487947, 845037476, 844395446, 843520488, 842975542, 842510806, 855582961, 852691524, 851933703, 851060467, 850479305, 849203565, 848697625]

for experiment_id in experiment_ids:
    PythonJob(
        python_file,
        python_executable='/home/alex.piet/codebase/miniconda3/envs/visbeh/bin/python', 
        python_args=experiment_id,
        conda_env=None,
        jobname = 'psy_{}'.format(experiment_id),
        **job_settings
    ).run(dryrun=False)



